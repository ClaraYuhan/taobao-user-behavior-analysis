淘宝用户购物行为数据分析报告

# 1. 项目背景与目的

本项目基于阿里巴巴天池平台开放的淘宝用户行为数据，分析用户在电商平台中的典型行为路径，识别高价值用户、潜力商品和转化瓶颈，最终为平台的运营优化和策略决策提供支持。
数据来源：阿里天池淘宝用户购物行为数据集
时间范围：2017-11-25 至 2017-12-03（9天）
数据体量：1亿行为记录，约100万用户
行为类型：点击（pv）、加购（cart）、收藏（fav）、购买（buy）
分析目标：
分析用户活跃行为及行为路径
分析商品与类目的热度和转化效率
提出优化建议，如重点商品运营、时间段投放策略、用户召回方案等

# 2. 数据说明与处理流程

## 2.1 字段说明
原始数据表 taobao_behavior 包含以下字段：
| 字段名             | 类型      | 说明                      |
| --------------- | ------- | ----------------------- |
| `user_id`       | BIGINT  | 用户唯一标识                  |
| `item_id`       | BIGINT  | 商品唯一标识                  |
| `category_id`   | BIGINT  | 商品所属类目 ID               |
| `behavior_type` | VARCHAR | 用户行为类型（pv/buy/cart/fav） |
| `ts`            | BIGINT  | 行为发生时间（Unix 时间戳）        |

## 2.2 数据预处理
清除不在2017-11-25 00:00:00 ～ 2017-12-03 23:59:59时间范围内的无效时间戳
查看字段无空值
检查存在完全重复记录49条，备份后已删除
将字段ts时间戳转换为datetime类型，新增列event_time
索引优化：user_id、item_id、behavior_type、event_time加索引，加快查询效率

# 3. 分析框架设计
维度：时间维度、用户维度、商品维度
分析路径：
总体 → 时间 → 用户 → 转化路径 → 商品 → 洞察

# 4. 数据分析结果
## 4.1 总体行为概览
本节旨在宏观把握用户整体行为模式，回答“平台用户有多少？最常见的行为是什么？用户活跃在哪些时间段？”等关键问题，为后续的行为细化分析打下基础。

### 4.1.1 总体规模统计
#### 【图4.1.1】总体概览
![图4.1.1 总体概览](/output/images/4.1_overview/4.1.1_overview_total_count.png)
总行为数：100,095,182 条
总用户数：987,991 人
总商品数：4,161,138 个
总类目数：9,437 个
【图解说明】
该图展示了本次分析样本的总体行为规模，包含总行为数、总用户数、总商品数、总类目数等基础指标，用于感知整体数据的量级。

### 4.1.2 行为类型分布
#### 【图4.1.2】用户行为类型分布
![图4.1.2 用户行为类型分布](/output/images/4.1_overview/4.1.2_behavior_type_ratio.png)

| 行为类型     | 行为数量     | 占比     |
|------------|------------|----------|
| pv（点击）   | 89,660,671 | 90.64%   |
| cart（加购） | 5,530,446  | 5.59%    |
| fav（收藏） | 2,888,258  | 2.92%    |
| buy（购买） | 2,015,807  | 2.04%    |
【图解说明】
该图展示了四类用户行为在总体数据中的分布情况，其中点击（pv）占比高达 90%，加购（cart）6%、收藏（fav）3%、购买（buy）仅为 2%。

### 4.1.3 每日行为趋势
#### 【图4.1.3】每日行为趋势
![图4.1.3 每日行为趋势](/output/images/4.1_overview/4.1.3_daily_behavior_trend.png)
【图解说明】
该图展示了用户在 9 天期间每日行为量的变化趋势。日行为数稳定在 1000 万左右，在 12.1–12.3 出现显著跃升（~1370 万/日）。结合外部资料，可能原因为淘宝/天猫启动双12预热活动。

### 4.1.4 每小时行为趋势
#### 【图4.1.4】每小时行为趋势
![图4.1.4 每小时行为趋势](/output/images/4.1_overview/4.1.4_hourly_behavior_trend.png)
【图解说明】
该图展示了用户行为低谷期为午夜至清晨，符合作息规律，其他时间段呈现“昼伏夜出”特征，晚间（20-22点）是全天绝对的高峰活跃期，运营策略与资源投放最佳时间​​为​​晚间（18:00 - 22:00）​​。

### 4.1.5 热力图：日期 × 小时行为热度（归一化）
#### 【图4.1.5】用户行为归一化热力图
![图4.1.5 用户行为归一化热力图](/output/images/4.1_overview/4.1.5_behavior_heatmap.png)
【图解说明】
各行为按本类最大值归一化（0–1），统一坐标系。
归一化后，所有行为的曲线形状相似，但峰值时间偏移，表明用户行为虽然有整体一致性，但具体行动有时序差异。例如，buy、pv的高峰在21:00，cart、fav的高峰在22:00
​​针对21:00的buy/pv高峰​​可​推出限时促销​​、秒杀活动，利用用户的高活跃度刺激即时购买。
针对22:00的cart/fav高峰​​可​引导转化​​，发送优惠促进完成购买。

## 4.2 用户行为分析
本节聚焦于用户个体维度，从行为活跃度、行为组合、价值分层等角度，识别出关键用户群体，为个性化营销与用户运营提供依据。

### 4.2.1 用户活跃度分布
#### 【图4.2.1】用户行为次数分布直方图
![图4.2.1 用户行为次数分布直方图](/output/images/4.2_user/4.2.1_user_behavior_count_histogram.png)
【图解说明】
用户行为次数分布直方图（桶=10，起始=0），该图将所有用户按照其行为次数进行分箱，展示各区间的用户数量。
图像呈典型右偏长尾分布：大多数用户行为次数集中在 0–50 次以下，活跃度较低；极少数用户行为次数超过 300 次。
说明平台中存在大量低频用户，需考虑提升中腰部用户活跃度的策略。

### 4.2.2 用户行为结构分析
#### 【图4.2.2-a】行为类型的用户覆盖率
![图4.2.2-a 行为类型的用户覆盖率](/output/images/4.2_user/4.2.2-a_behavior_type_coverage.png)
【图解说明】
口径：统计每种行为（如浏览、收藏、加购、购买）至少做过一次的用户数，占总用户数的比例。（不是次数占比）。
pv≈99.6%、cart≈74.8%、buy≈68.1%、fav≈39.5%。
在本时间窗内，大多数用户都有浏览（pv），“加购”覆盖面显著大于“收藏”，而“购买”覆盖面接近“加购”。这说明很多用户把“加购”当作“待购清单”，收藏的使用偏少。

#### 【图4.2.2-b】用户互斥分层（最终行为）
![图4.2.2-b 用户互斥分层（最终行为）](/output/images/4.2_user/4.2.2-b_user_segments_exclusive.png)
【图解说明】
定义：互不重叠的人群划分：买家 > 加购未购 > 收藏未购 > 仅浏览。
结果：买家≈68.1%、加购未购≈21.0%、收藏未购≈4.9%、仅浏览≈6.0%。
解释：观望人群合计≈26%（加购未购 + 收藏未购）。其中“加购未购”体量最大，是当期最具拉升空间的人群；“仅浏览”占比不高，更适合用低打扰推荐与首页/搜索体验优化来慢慢培育。
运营预算向“加购未购”倾斜（券/包邮/提醒）；
“收藏未购”做小规模个性化触达（清单式召回、降价提醒）；
“仅浏览”侧重内容与检索的相关性提升，而非强促销。

#### 【图4.2.2-c】行为交叉与购买分析
![图4.2.2-c 行为交叉与购买分析](/output/images/4.2_user/4.2.2-c_behavior_overlap_buy.png)
【图解说明】
定义：
组内购买率（within_group_rate）= 在做过该行为的人里，有多少最终购买（用户级转化）；
全体占比（all_user_share）= 这类交叉用户占所有用户的比例。
pv∩buy 的“组内购买率”通常≈总体购买覆盖率，信息增量有限，仅保留“全体占比”。
结果：
cart∩buy：组内购买率≈71.9%，全体占比≈53.8%；
fav∩buy：组内购买率≈71.1%，全体占比≈28.1%；
pv∩buy：组内购买率留空（本口径意义不大），全体占比≈67.7%。
解释：“加购→购买”的用户级转化率与“收藏→购买”非常接近（~71%），但因为“加购”的覆盖面更大，所以 cart∩buy 的全体占比远高于 fav∩buy。这再次说明“加购召回”更具规模效应。
建议：
晚间（在 4.1.4 验证过的 20–22 点）对“加购未购”推定向券/提醒，优先转化；
收藏人群更适合“清单式”信息（降价/到货/同款对比），走精细触达；

### 4.2.3 用户留存分析
​​在没有用户注册时间的情况下，本节所做的“留存”分析，实际上衡量的是用户的“回访粘性”或“持续活跃度”，而不是传统意义上的“新用户留存”。​仅用来衡量平台对用户吸引力和粘性的核心指标。
本节以每日首次活跃用户为分组基准，观察其在后续若干天内是否再次活跃，从而计算 D1（次日）、D3（三日）、D1–3（滚动窗口）等留存率指标。
1. 分析口径说明
Cohort 日期：指用户在某天首次活跃的时间，即该用户被划分入的 cohort 分组。
活跃定义：用户在某日内发生任意行为（点击、加购、收藏、购买）即计为活跃。
D1 留存：cohort 用户在次日（t+1）是否再次活跃。
D3 留存：cohort 用户在第三日（t+3）是否再次活跃。
D1–3 留存：cohort 用户在第 1~3 日内任意一天再次活跃。
由于本数据仅覆盖 9 天行为，实际可计算留存的 cohort 截至 2017-11-30（否则无法观察完整 D3）。
2. 技术实现逻辑
以 taobao_behavior 表构建每日活跃用户明细 dau 表（user_id + 日期）。
利用 JOIN 操作将 cohort 用户与未来日期行为关联，判断是否再次活跃。
使用 COUNT(DISTINCT user_id) 确保用户重复回来不重复计数。
留存率计算公式：留存人数 / cohort 总人数
汇总为表格供 Tableau 可视化使用。
3. 术语解释
| 术语                  | 含义解释                                     |
| ------------------- | ---------------------------------------- |
| **T（cohort\_date）** | 指用户首次被统计为“活跃用户”的日期（即在该日发生任意行为）           |
| **T+1**             | 用户活跃后的第 1 天，即次日                          |
| **T+3**             | 用户活跃后的第 3 天                              |
| **D1 留存率**          | 在 cohort\_date 当天活跃的用户中，有多少在 T+1（次日）仍活跃  |
| **D3 留存率**          | 在 cohort\_date 当天活跃的用户中，有多少在 T+3（第三天）仍活跃 |

#### 【图4.2.3-a】留存趋势（D1 & D3）折线图
![图4.2.3-a留存趋势（D1 & D3）折线图](/output/images/4.2_user/4.2.3-a_retention_trend_d1_d3.png)
【图解说明】
口径：cohort_date 为当天活跃用户（去重，任一行为≥1）；D1=次日仍活跃占比，D3=第三日仍活跃占比。
观察要点：
D1 留存稳定在 78–80% 区间，为平台常态水平。
11/29 的 D3 留存高达 98.5%，说明第三天存在 强召回效应，如活动优惠或推送触达等。
D3 在多数日期低于 D1，但在 11/29、11/30 出现反转现象（D3 > D1），提示第三天的运营策略可能更有效。
建议：
将 T+3 的召回常态化，并同步在 T+1做一些「轻量级提醒」，将T+3与T+1 的轻提醒做对照实验，分析哪一种能更有效地让用户回来继续使用平台。

#### 【图4.2.3-b】留存 × 规模（DAU 柱 + D1 线）
![图4.2.3-b 留存 × 规模（DAU 柱 + D1 线）](/output/images/4.2_user/4.2.3-b_dau_d1_retention_bar_line.png)
【图解说明】
​​每日活跃用户（DAU）​​ 稳定在 ​​70万至73万​​ 之间，波动非常小。这表明平台拥有一个庞大且稳定的核心用户群体，没有出现明显的用户流失或暴跌。
次日留存率（D1 Retention）​​ 始终维持在 ​​77.7% 至 79.6%​​ 的高位区间。
用户规模（DAU）和用户粘性（留存率）​​两者均保持高位稳定，且波动无相关性​​。这是一种非常理想的“稳态”结构。

#### 【4.2.3-c】留存热力图（D1/D3/D1-3）
![图4.2.3-c 留存热力图（D1/D3/D1-3）](/output/images/4.2_user/4.2.3-c_retention_heatmap_d1_d3_d13.png)
【图解说明】
D1、D3留存率基本稳定在接近80%的位置，但是11.29、11.30的D3留存率突然涨至98%，说明平台在12.2、12.3日成功启动了一项大型营销活动，且在11.29（或更早）便开始为活动预热传播，为用户创造了强烈的预期，成功锁定了用户在未来3天的回访行为，使3日回访率从78%大幅提升至98%以上，活动效果极其显著。

### 4.2.4 用户行为路径与转化分析
本节聚焦于电商平台用户从“浏览 → 加购 → 购买”的主路径行为流程，衡量长期的用户转化和全站的整体效率​。
#### 【4.2.4-a】用户行为转化漏斗图
![图4.2.4-a 用户行为转化漏斗图](/output/images/4.2_user/4.2.4-a_user_behavior_funnel.png)
【口径与定义说明】
行为路径定义：
漏斗图依照用户行为顺序构建：
Step 1：pv（浏览行为）
Step 2：cart（加购行为）
Step 3：buy（购买行为）
行为关系为并列统计，并非必须连续发生，也不要求某个用户依次完成所有行为。
统计对象：
用户维度聚合：即每一个行为阶段统计的是发生过该行为的 独立用户数（COUNT(DISTINCT user_id)）
时间窗口：
统计范围为 2017-11-25 至 2017-12-03（数据集中全部 9 天），不设行为之间发生的先后顺序或时间限制。
【图解说明】
本图以水平条形展示了从浏览（pv）到加购（cart）再到购买（buy）的用户数比例，以pv用户数为100%基准。：75.1%的浏览用户会进行加购，说明加购行为是用户购买意图的强烈信号。从浏览到购买的转化率高达68.3%，转化效率较高。

#### 【图4.2.4-b】4.2.4-b 用户转化率与流失率柱状图
![图4.2.4-b 用户转化率与流失率柱状图](/output/images/4.2_user/4.2.4-b_conversion_loss_bar.png)
【口径与定义说明】
用户只要发生过某类行为一次以上，即记为该行为的“参与者”；
所有用户行为基于 taobao_behavior 表中进行判断，时间范围为项目数据覆盖的全部 9 天。
行为阶段定义：
pv_users：至少有一次 浏览（pv） 行为的用户数；
cart_users：至少有一次 加购（cart） 行为的用户数；
buy_users：至少有一次 购买（buy） 行为的用户数；
注意：同一用户可能同时出现在多个行为阶段。
转化率计算逻辑：
| 指标名                   | 公式                      | 含义                  |
| ----------------------- | ------------------------ | --------------------- |
| **pv_to_cart_rate**     | cart_users / pv_users    | 浏览 → 加购的用户转化率  |
| **pv_to_buy_rate**      | buy_users / pv_users     | 浏览 → 购买的用户转化率  |
| **cart_to_buy_rate**    | buy_users / cart_users   | 加购 → 购买的用户转化率  |
流失率计算逻辑：
| 指标名                         | 公式                        | 含义           |
| ----------------------------- | -------------------------- | ----------- |
| **pv_to_cart_loss_rate**      | 100% - pv_to_cart_rate     | 从浏览到加购流失的比例 |
| **pv_to_buy_loss_rate**       | 100% - pv_to_buy_rate      | 从浏览到购买流失的比例 |
| **cart_to_buy_loss_rate**     | 100% - cart_to_buy_rate    | 从加购到购买流失的比例 |
【图解说明】
本图以柱状图形式详细展示了转化率和流失率的具体数值，可以看到
浏览到购买流失率为31.67%，其中从浏览到加购流失率（24.91%）显著大于加购到购买流失率（9.01%），且​加购后购买转化率极高​​（90.99%），这表明一旦用户将商品加入购物车，他们几乎肯定会完成购买。建议运营策略应聚焦于减少浏览到加购的流失（24.91%）。

## 4.3 商品与类目分析
### 4.3.1 热门商品排行
#### 【图4.3.1-a】热门商品排行：点击量 Top10 商品
![图4.3.1-a 热门商品排行：点击量 Top10 商品](/output/images/4.3_product/4.3.1-a_top10_items_by_pv.png)
【图解说明】
该图展示了点击量（pv）排名前十的商品，反映最吸引用户兴趣的商品，Top10商品的点击量范围从17,159到30,079，差距显著。

#### 【图4.3.1-b】热门商品排行：购买量 Top10 商品
![图4.3.1-b 热门商品排行：购买量 Top10 商品](/output/images/4.3_product/4.3.1-b_top10_items_by_buy.png)
【图解说明】
该图展示了用户实际购买了哪些商品，Top10商品的购买量范围从493到1,408，差距显著。

### 4.3.2 商品成交结构分析（购买量帕累托图）
分析口径：所有商品按购买量降序排列
计算：
每个商品的累计购买量；
该累计量占全平台总购买量的比例（累计占比）；
根据累计占比与商品排名占比，判断商品结构是否存在帕累托特性或长尾分布。

#### 【图4.3.2】商品购买量帕累托图
![图4.3.2 商品购买量帕累托图](/output/images/4.3_product/4.3.2_item_pareto_chart.png)
【图解说明】
图像显示：前面极少数商品（左侧蓝柱）购买量极高，使橙线迅速上升，橙线大约在商品排名前 40% 时就已突破 80%，后面58%的商品（右侧）蓝柱几乎为 0，说明绝大多数商品购买量极低
橙色 80% 线以下的红色段较短，说明平台购买行为集中度比较高 
通过帕累托分析发现，前约 39.36% 的商品贡献了平台 80% 的购买量，表明淘宝平台存在显著的长尾商品结构，成交行为高度集中于少数爆款商品，但尾部商品体量庞大，具有可挖掘空间

### 4.3.3 商品转化率分析
#### 【图4.3.3-a】商品点击量 vs 转化率 散点图
![图4.3.3-a 商品点击量 vs 转化率 散点图](/output/images/4.3_product/4.3.3-a_scatter_pv_vs_buyrate.png)
【口径说明】
数据来源文件：fe_all_items_buy_rate.csv，主要内容：统计每个商品的浏览次数与购买次数，基于浏览次数 ≥ 50 的商品，计算购买转化率，生成分析所用明细表。
使用sql计算出 pv_count和buy_rate 的 75% 分位数，在tableau中创建计算字段按照P75划分象限
Log 转换象限图是根据75% 分位数，计算以 10 为底的LOG，再创建象限分类字段（Log版）
【图解说明】
本节通过商品点击量与转化率的散点图分析，结合点击量与转化率的 75% 分位数划分四象限，识别出不同商品类型。
图中大部分数据点集中在左下角，商品表现高度集中，大多数商品表现不佳。
“爆款商品”（高浏览次数和高转化率）位于右上象限，数量较少但价值显著。
针对潜力商品和精准商品可制定差异化策略。
纵轴转化率范围（0到4%）表明，即使对于高转化率商品，转化率也相对较低。
散点图显示浏览次数（Pv Count）分布不均，少数商品获得高流量，而多数商品流量匮乏。

#### 【图4.3.3-b】商品点击量 vs 转化率（Log 转换 & 象限划分）
![4.3.3-b 商品点击量 vs 转化率（Log 转换 & 象限划分）](/output/images/4.3_product/4.3.3-b_scatter_log_pv_vs_buyrate_quadrant.png)
【图解说明】
本图对商品点击量（Pv Count）与购买转化率（Buy Rate）进行了 log10 转换，并基于两者的 75% 分位数作为划分阈值，将商品划分为四类，通过对数转换，点击量和转化率的分布更均匀，避免了极端值对视觉分析的干扰。
从点的分布来看，高点击量并不总是带来高转化率（如潜力商品），而高转化率也可能伴随低点击量（如精准商品）。这表明商品的成功取决于多种因素，如商品质量、定价、营销策略和用户定位，而非单纯依赖流量。
各象限的分布为：
​​爆款商品（蓝色）​​：位于右上象限，具有高 log_pv_count 和高 log_buy_rate。这些商品同时拥有高流量和高转化效率，是平台主要的成交来源。
潜力商品（橙色）​​：位于右下象限，高 log_pv_count 但低 log_buy_rate。这些商品获得了大量点击，但转化率低，提示可能存在页面优化、价格或信任度问题。
​精准商品（绿色）​​：位于左上象限，低 log_pv_count 但高 log_buy_rate。这些商品转化效率高但曝光不足，可能针对小众市场或缺乏推广。
​​沉寂商品（灰色）​​：位于左下象限，低 log_pv_count 和低 log_buy_rate。这些商品表现最差，可能需要重新评估或下架。
总结：
流量严重向少数爆款集中，平台上存在大量沉寂商品，一些潜力商品与精准商品因为资源不足被埋没。
建议：
1. 识别重点扶持对象
潜力商品（高点击低转化）：排查商品页质量、价格定位、评价、物流策略等转化影响因子；给予运营建议或工具提示（如标题优化建议）
精准商品（低点击高转化）：提升曝光权重，加入猜你喜欢、为你推荐等模块
沉寂商品（低点击低转化）：给商家反馈，建议优化或下架，提升商品池健康度
2. 优化流量分发算法
目前系统可能优先推荐爆款商品，导致头部垄断。平台可以：
在推荐算法里，不只推热门商品，有意识地给新品或小众商品多点机会展示；
对于精准和潜力商品提供少量测试流量，评估其增长潜力；
优化 “人-货匹配”：不同用户偏好商品应有差异推荐策略。
3. 建立商品分层运营机制
当前的象限分类（爆款 / 潜力 / 精准 / 沉寂）可以作为：
平台内部商品分层运营框架
为每一类商品设计不同的运营/激励机制
爆款商品：保持流量，主推资源投放
潜力商品：提升转化：详情页优化、评价提醒、价格引导
精准商品：提升流量：测试投放、冷启动推荐
沉寂商品：清理或分类收录，降低算法权重

# 5. 分析总结
本报告围绕淘宝电商平台用户的浏览、加购、收藏与购买行为，从时间、用户与商品三大维度展开深入分析，提炼出以下核心洞察：

## 一、用户行为特征总结
用户活跃呈现典型“昼伏夜出”趋势，高峰集中于晚间 20–22 点，运营投放可重点聚焦晚高峰；
近 70% 的用户完成购买，但加购未购与收藏未购仍有约 26% 潜力用户可召回，其中“加购未购”体量最大，是最具拉升空间的人群；
优先针对“加购未购”人群开展促销与提醒，可实现短期转化提升。长期来看，提升浏览加购率是优化重点。
留存率稳定在高位，11.29 D3 留存高达 98.5%，体现了特定营销活动对用户粘性的强拉动作用。

## 二、商品结构与成交特征
商品成交呈现明显的“长尾分布”：前 40% 商品贡献超过 80% 成交；
散点图显示流量与成交高度集中于少数爆款商品，大量中尾部商品处于“沉寂”状态；
基于点击量与转化率 75% 分位数划分的四象限显示：
  **爆款商品**：价值最大，应保持流量扶持；
  **潜力商品**：建议优化页面信息与价格策略；
  **精准商品**：转化率高但曝光不足，可尝试冷启动提权；
  **沉寂商品**：低点击+低转化，应考虑下架或优化。

# 6. 附录与技术说明
SQL 查询脚本见 src/sql/06_data_analysis.sql
可视化图表见 output/images/ 文件夹
项目结构与操作步骤见 README.md
报告撰写：qyl
项目名称：基于 MySQL 和 Tableau 的淘宝用户行为分析